<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda de Contatos</title>
    <style>
        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin: 5px;
            padding: 10px;
            background-color: #f2f2f2;
            cursor: pointer;
        }

        li:hover {
            background-color: #ddd;
        }

        .detalhes {
            margin-top: 20px;
            display: none;
        }
    </style>
</head>
<body>

<h1>Agenda de Contatos</h1>

<ul id="listaContatos"></ul>

<!-- Detalhes do Contato -->
<div id="detalhes" class="detalhes">
    <h2>Detalhes do Contato</h2>
    <p><strong>Posto/Graduação:</strong> <span id="postograd"></span></p>
    <p><strong>Nome:</strong> <span id="nome"></span></p>
    <p><strong>Id. Func.:</strong> <span id="idfunc"></span></p>
    <p><strong>Classificação Conforme RHE:</strong> <span id="classificacao"></span></p>
    <p><strong>Setor:</strong> <span id="setor"></span></p>
    <p><strong>Telefone:</strong> <span id="telefone"></span></p>
</div>

<script>
    // Função para ler o arquivo CSV
    function lerCSV(arquivo) {
        var request = new XMLHttpRequest();
        request.open("GET", arquivo, false);
        request.send(null);
        var arquivoCSV = request.responseText;
        return arquivoCSV;
    }

    // Ler o conteúdo do arquivo CSV
    var dadosCSV = lerCSV("Agenda27.csv");

    // Dividir o conteúdo em linhas e células
    var linhas = dadosCSV.split('\n');
    var dados = [];
    for (var i = 1; i < linhas.length; i++) {
        dados.push(linhas[i].split(','));
    }

    // Preencher a lista de contatos
    var listaContatos = document.getElementById("listaContatos");
    dados.forEach(function (linha, index) {
        var li = document.createElement("li");
        li.textContent = linha[2]; // Coluna do Nome
        li.onclick = function () {
            exibirDetalhes(index);
        };
        listaContatos.appendChild(li);
    });

    // Função para exibir detalhes do contato selecionado
    function exibirDetalhes(index) {
        document.getElementById("postograd").textContent = dados[index][1];
        document.getElementById("nome").textContent = dados[index][2];
        document.getElementById("idfunc").textContent = dados[index][3];
        document.getElementById("classificacao").textContent = dados[index][4];
        document.getElementById("setor").textContent = dados[index][5];
        document.getElementById("telefone").textContent = dados[index][10]; // Coluna do Telefone

        // Oculta todos os detalhes antes de exibir o correto
        var detalhesContatos = document.getElementsByClassName("detalhes");
        for (var i = 0; i < detalhesContatos.length; i++) {
            detalhesContatos[i].style.display = "none";
        }

        // Exibe os detalhes do contato selecionado
        document.getElementById("detalhes").style.display = "block";
    }
</script>

</body>
</html>
